{"ast":null,"code":"export const REQUEST_TOKEN = 'REQUEST_TOKEN';\nexport const RECEIVE_USER_DATA = 'RECEIVE_USER_DATA';\nexport const ACCESS_TOKEN_WAS_NOT_VALID = 'ACCESS_TOKEN_WAS_NOT_VALID';\nexport const REFRESH_TOKEN = 'REFRESH_TOKEN';\nexport function requestToken() {\n  return {\n    type: REQUEST_TOKEN\n  };\n}\nexport function receiveUserData(userData) {\n  return {\n    type: RECEIVE_USER_DATA,\n    userData: userData\n  };\n}\nexport function accessTokenWasNotValid() {\n  return {\n    type: ACCESS_TOKEN_WAS_NOT_VALID\n  };\n}\nexport function refreshToken() {\n  return {\n    type: REFRESH_TOKEN\n  };\n}\nexport function refreshTokensAction(path, refreshToken) {\n  return refreshTokens(path, refreshTokens);\n}\n\nasync function refreshTokens(path, refreshToken) {\n  const resp = await fetch(path, {\n    method: 'POST',\n    headers: {\n      'Authorization': 'Bearer ' + refreshToken\n    }\n  });\n  const json = await resp.json();\n  console.log(json);\n  return await json;\n}\n\nexport function logInWithToken(path, token) {\n  return async function (dispatch) {\n    dispatch(requestToken());\n    const resp = await fetch(path, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + token\n      }\n    });\n    const json = await resp.json();\n    console.log(json);\n    if (json.statusCode === 401) dispatch(accessTokenWasNotValid());\n    dispatch(receiveUserData(json));\n    return await json;\n  };\n}","map":{"version":3,"sources":["C:/Users/Bogdan/Desktop/Task 3 React/my-app/src/actions/tokenManagement.js"],"names":["REQUEST_TOKEN","RECEIVE_USER_DATA","ACCESS_TOKEN_WAS_NOT_VALID","REFRESH_TOKEN","requestToken","type","receiveUserData","userData","accessTokenWasNotValid","refreshToken","refreshTokensAction","path","refreshTokens","resp","fetch","method","headers","json","console","log","logInWithToken","token","dispatch","statusCode"],"mappings":"AAAA,OAAO,MAAMA,aAAa,GAAG,eAAtB;AACP,OAAO,MAAMC,iBAAiB,GAAG,mBAA1B;AACP,OAAO,MAAMC,0BAA0B,GAAG,4BAAnC;AACP,OAAO,MAAMC,aAAa,GAAG,eAAtB;AACP,OAAO,SAASC,YAAT,GAAwB;AAC3B,SAAO;AACHC,IAAAA,IAAI,EAAEL;AADH,GAAP;AAGH;AACD,OAAO,SAASM,eAAT,CAAyBC,QAAzB,EAAmC;AACtC,SAAO;AACHF,IAAAA,IAAI,EAAEJ,iBADH;AAEHM,IAAAA,QAAQ,EAAEA;AAFP,GAAP;AAIH;AACD,OAAO,SAASC,sBAAT,GAAkC;AACrC,SAAO;AACHH,IAAAA,IAAI,EAAEH;AADH,GAAP;AAGH;AACD,OAAO,SAASO,YAAT,GAAwB;AAC3B,SAAO;AACHJ,IAAAA,IAAI,EAAEF;AADH,GAAP;AAGH;AACD,OAAO,SAASO,mBAAT,CAA6BC,IAA7B,EAAmCF,YAAnC,EAAiD;AACpD,SAAOG,aAAa,CAACD,IAAD,EAAMC,aAAN,CAApB;AACH;;AACD,eAAeA,aAAf,CAA6BD,IAA7B,EAAmCF,YAAnC,EAAiD;AAC7C,QAAMI,IAAI,GAAG,MAAMC,KAAK,CACpBH,IADoB,EAEpB;AACII,IAAAA,MAAM,EAAE,MADZ;AAEIC,IAAAA,OAAO,EAAE;AACL,uBAAiB,YAAYP;AADxB;AAFb,GAFoB,CAAxB;AASA,QAAMQ,IAAI,GAAG,MAAMJ,IAAI,CAACI,IAAL,EAAnB;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACA,SAAO,MAAMA,IAAb;AACH;;AACD,OAAO,SAASG,cAAT,CAAwBT,IAAxB,EAA8BU,KAA9B,EAAqC;AACxC,SAAO,gBAAgBC,QAAhB,EAA0B;AAC7BA,IAAAA,QAAQ,CAAClB,YAAY,EAAb,CAAR;AACA,UAAMS,IAAI,GAAG,MAAMC,KAAK,CACpBH,IADoB,EAEpB;AACII,MAAAA,MAAM,EAAE,KADZ;AAEIC,MAAAA,OAAO,EAAE;AACL,wBAAgB,kBADX;AAEL,yBAAiB,YAAYK;AAFxB;AAFb,KAFoB,CAAxB;AAUA,UAAMJ,IAAI,GAAG,MAAMJ,IAAI,CAACI,IAAL,EAAnB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACA,QAAIA,IAAI,CAACM,UAAL,KAAoB,GAAxB,EACID,QAAQ,CAACd,sBAAsB,EAAvB,CAAR;AACJc,IAAAA,QAAQ,CAAChB,eAAe,CAACW,IAAD,CAAhB,CAAR;AACA,WAAO,MAAMA,IAAb;AACH,GAlBD;AAmBH","sourcesContent":["export const REQUEST_TOKEN = 'REQUEST_TOKEN';\r\nexport const RECEIVE_USER_DATA = 'RECEIVE_USER_DATA';\r\nexport const ACCESS_TOKEN_WAS_NOT_VALID = 'ACCESS_TOKEN_WAS_NOT_VALID';\r\nexport const REFRESH_TOKEN = 'REFRESH_TOKEN';\r\nexport function requestToken() {\r\n    return {\r\n        type: REQUEST_TOKEN\r\n    }\r\n}\r\nexport function receiveUserData(userData) {\r\n    return {\r\n        type: RECEIVE_USER_DATA,\r\n        userData: userData\r\n    }\r\n}\r\nexport function accessTokenWasNotValid() {\r\n    return {\r\n        type: ACCESS_TOKEN_WAS_NOT_VALID\r\n    }\r\n}\r\nexport function refreshToken() {\r\n    return {\r\n        type: REFRESH_TOKEN\r\n    }\r\n}\r\nexport function refreshTokensAction(path, refreshToken) {\r\n    return refreshTokens(path,refreshTokens)\r\n}\r\nasync function refreshTokens(path, refreshToken) {\r\n    const resp = await fetch(\r\n        path,\r\n        {\r\n            method: 'POST',\r\n            headers: {\r\n                'Authorization': 'Bearer ' + refreshToken\r\n            }\r\n        }\r\n    );\r\n    const json = await resp.json();\r\n    console.log(json);\r\n    return await json;\r\n}\r\nexport function logInWithToken(path, token) {\r\n    return async function (dispatch) {\r\n        dispatch(requestToken());\r\n        const resp = await fetch(\r\n            path,\r\n            {\r\n                method: 'GET',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': 'Bearer ' + token\r\n                }\r\n            }\r\n        );\r\n        const json = await resp.json();\r\n        console.log(json);\r\n        if (json.statusCode === 401)\r\n            dispatch(accessTokenWasNotValid());\r\n        dispatch(receiveUserData(json))\r\n        return await json;\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}