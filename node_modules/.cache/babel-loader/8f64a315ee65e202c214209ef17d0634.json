{"ast":null,"code":"import { refreshingTokens } from \"./tokenManagement\";\nexport const REQUEST_SIGN_FORM = 'REQUEST_SIGN_FORM';\nexport const RESEIVE_SIGN_FORM = 'RESEIVE_SIGN_FORM';\nexport const USER_WAS_CREATED = 'USER_WAS_CREATED';\nexport const USER_LOGGED_IN = 'USER_LOGGED_IN';\nexport function userWasCreated() {\n  return {\n    type: USER_WAS_CREATED\n  };\n}\nexport function userLoggedIn() {\n  return {\n    type: USER_LOGGED_IN\n  };\n}\nexport function requestSignForm() {\n  return {\n    type: REQUEST_SIGN_FORM\n  };\n}\nexport function reseiveSignForm(data) {\n  return {\n    type: RESEIVE_SIGN_FORM,\n    data: data\n  };\n}\nexport function signIn(path) {\n  return async function (dispatch) {\n    dispatch(requestSignForm());\n    const resp = await fetch(path, {\n      method: 'POST'\n    });\n    const json = await resp.json();\n    console.log(json);\n\n    if (json.body.acces_token && json.body.refresh_token) {\n      dispatch(userLoggedIn());\n      dispatch(refreshingTokens(json.accesToken, json.refreshToken));\n    }\n\n    dispatch(reseiveSignForm(json));\n    return await json;\n  };\n}\nexport function signUp(path) {\n  return async function (dispatch) {\n    dispatch(requestSignForm());\n    const resp = await fetch(path, {\n      method: 'POST'\n    });\n    const json = await resp.json();\n\n    if (json.status === 'Ok') {\n      dispatch(userWasCreated());\n    } else dispatch(reseiveSignForm(json));\n\n    return await json;\n  };\n}","map":{"version":3,"sources":["C:/Users/Bogdan/Desktop/Task 3 React/my-app — копия/src/actions/signFormControllerActions.js"],"names":["refreshingTokens","REQUEST_SIGN_FORM","RESEIVE_SIGN_FORM","USER_WAS_CREATED","USER_LOGGED_IN","userWasCreated","type","userLoggedIn","requestSignForm","reseiveSignForm","data","signIn","path","dispatch","resp","fetch","method","json","console","log","body","acces_token","refresh_token","accesToken","refreshToken","signUp","status"],"mappings":"AAAA,SAASA,gBAAT,QAAiC,mBAAjC;AAEA,OAAO,MAAMC,iBAAiB,GAAG,mBAA1B;AACP,OAAO,MAAMC,iBAAiB,GAAG,mBAA1B;AACP,OAAO,MAAMC,gBAAgB,GAAG,kBAAzB;AACP,OAAO,MAAMC,cAAc,GAAG,gBAAvB;AACP,OAAO,SAASC,cAAT,GAA0B;AAC7B,SAAO;AACHC,IAAAA,IAAI,EAAEH;AADH,GAAP;AAGH;AACD,OAAO,SAASI,YAAT,GAAwB;AAC3B,SAAO;AACHD,IAAAA,IAAI,EAAEF;AADH,GAAP;AAGH;AACD,OAAO,SAASI,eAAT,GAA2B;AAC9B,SAAO;AACHF,IAAAA,IAAI,EAAEL;AADH,GAAP;AAGH;AACD,OAAO,SAASQ,eAAT,CAAyBC,IAAzB,EAA+B;AAClC,SAAO;AACHJ,IAAAA,IAAI,EAAEJ,iBADH;AAEHQ,IAAAA,IAAI,EAAEA;AAFH,GAAP;AAIH;AACD,OAAO,SAASC,MAAT,CAAgBC,IAAhB,EAAsB;AACzB,SAAO,gBAAgBC,QAAhB,EAA0B;AAC7BA,IAAAA,QAAQ,CAACL,eAAe,EAAhB,CAAR;AACA,UAAMM,IAAI,GAAG,MAAMC,KAAK,CAACH,IAAD,EAAM;AAACI,MAAAA,MAAM,EAAC;AAAR,KAAN,CAAxB;AACA,UAAMC,IAAI,GAAG,MAAMH,IAAI,CAACG,IAAL,EAAnB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;;AACA,QAAGA,IAAI,CAACG,IAAL,CAAUC,WAAV,IAAyBJ,IAAI,CAACG,IAAL,CAAUE,aAAtC,EAAoD;AAChDT,MAAAA,QAAQ,CAACN,YAAY,EAAb,CAAR;AACAM,MAAAA,QAAQ,CAACb,gBAAgB,CAACiB,IAAI,CAACM,UAAN,EAAiBN,IAAI,CAACO,YAAtB,CAAjB,CAAR;AACH;;AACDX,IAAAA,QAAQ,CAACJ,eAAe,CAACQ,IAAD,CAAhB,CAAR;AACA,WAAO,MAAMA,IAAb;AACH,GAXD;AAYH;AACD,OAAO,SAASQ,MAAT,CAAgBb,IAAhB,EAAsB;AACzB,SAAO,gBAAgBC,QAAhB,EAA0B;AAC7BA,IAAAA,QAAQ,CAACL,eAAe,EAAhB,CAAR;AACA,UAAMM,IAAI,GAAG,MAAMC,KAAK,CAACH,IAAD,EAAO;AAACI,MAAAA,MAAM,EAAE;AAAT,KAAP,CAAxB;AACA,UAAMC,IAAI,GAAG,MAAMH,IAAI,CAACG,IAAL,EAAnB;;AACA,QAAGA,IAAI,CAACS,MAAL,KAAgB,IAAnB,EAAwB;AACpBb,MAAAA,QAAQ,CAACR,cAAc,EAAf,CAAR;AACH,KAFD,MAIAQ,QAAQ,CAACJ,eAAe,CAACQ,IAAD,CAAhB,CAAR;;AACA,WAAO,MAAMA,IAAb;AACH,GAVD;AAWH","sourcesContent":["import { refreshingTokens } from \"./tokenManagement\";\r\n\r\nexport const REQUEST_SIGN_FORM = 'REQUEST_SIGN_FORM';\r\nexport const RESEIVE_SIGN_FORM = 'RESEIVE_SIGN_FORM';\r\nexport const USER_WAS_CREATED = 'USER_WAS_CREATED';\r\nexport const USER_LOGGED_IN = 'USER_LOGGED_IN';\r\nexport function userWasCreated() {\r\n    return {\r\n        type: USER_WAS_CREATED\r\n    }\r\n}\r\nexport function userLoggedIn() {\r\n    return {\r\n        type: USER_LOGGED_IN\r\n    }\r\n}\r\nexport function requestSignForm() {\r\n    return {\r\n        type: REQUEST_SIGN_FORM\r\n    }\r\n}\r\nexport function reseiveSignForm(data) {\r\n    return {\r\n        type: RESEIVE_SIGN_FORM,\r\n        data: data\r\n    }\r\n}\r\nexport function signIn(path) {\r\n    return async function (dispatch) {\r\n        dispatch(requestSignForm());\r\n        const resp = await fetch(path,{method:'POST'});\r\n        const json = await resp.json();\r\n        console.log(json);\r\n        if(json.body.acces_token && json.body.refresh_token){\r\n            dispatch(userLoggedIn());\r\n            dispatch(refreshingTokens(json.accesToken,json.refreshToken));\r\n        }\r\n        dispatch(reseiveSignForm(json))\r\n        return await json;\r\n    }\r\n}\r\nexport function signUp(path) {\r\n    return async function (dispatch) {\r\n        dispatch(requestSignForm());\r\n        const resp = await fetch(path, {method: 'POST'});\r\n        const json = await resp.json();\r\n        if(json.status === 'Ok'){\r\n            dispatch(userWasCreated());\r\n        }\r\n        else\r\n        dispatch(reseiveSignForm(json))\r\n        return await json;\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}