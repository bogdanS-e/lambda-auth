{"ast":null,"code":"import { refreshingTokens, receiveUserData } from \"./tokenManagement\";\nexport const REQUEST_SIGN_FORM = 'REQUEST_SIGN_FORM';\nexport const RESEIVE_SIGN_FORM = 'RESEIVE_SIGN_FORM';\nexport const USER_WAS_CREATED = 'USER_WAS_CREATED';\nexport const USER_LOGGED_IN = 'USER_LOGGED_IN';\nexport const LOG_OUT = 'LOG_OUT';\nexport const GUEST = 'GUEST';\nexport function userWasCreated() {\n  return {\n    type: USER_WAS_CREATED\n  };\n}\nexport function userLoggedIn() {\n  return {\n    type: USER_LOGGED_IN\n  };\n}\nexport function requestSignForm() {\n  return {\n    type: REQUEST_SIGN_FORM\n  };\n}\nexport function reseiveSignForm(data) {\n  return {\n    type: RESEIVE_SIGN_FORM,\n    data: data\n  };\n}\nexport function logOut() {\n  return {\n    type: LOG_OUT\n  };\n}\nexport function signIn(path) {\n  return async function (dispatch) {\n    dispatch(requestSignForm());\n    const resp = await fetch(path, {\n      method: 'POST'\n    });\n    const json = await resp.json();\n    console.log(json);\n\n    if (json.body.access_token) {\n      dispatch(userLoggedIn());\n      dispatch(refreshingTokens(json.body.access_token, json.body.refresh_token));\n      dispatch(receiveUserData());\n    } else if (json.st) dispatch(reseiveSignForm(json));\n\n    return await json;\n  };\n}\nexport function signUp(path) {\n  return async function (dispatch) {\n    dispatch(requestSignForm());\n    const resp = await fetch(path, {\n      method: 'POST'\n    });\n    const json = await resp.json();\n\n    if (json.status === 'Ok') {\n      dispatch(userWasCreated());\n    } else dispatch(reseiveSignForm(json));\n\n    return await json;\n  };\n}","map":{"version":3,"sources":["C:/Users/Bogdan/Desktop/Task 3 React/my-app — копия/src/actions/signFormControllerActions.js"],"names":["refreshingTokens","receiveUserData","REQUEST_SIGN_FORM","RESEIVE_SIGN_FORM","USER_WAS_CREATED","USER_LOGGED_IN","LOG_OUT","GUEST","userWasCreated","type","userLoggedIn","requestSignForm","reseiveSignForm","data","logOut","signIn","path","dispatch","resp","fetch","method","json","console","log","body","access_token","refresh_token","st","signUp","status"],"mappings":"AAAA,SAASA,gBAAT,EAA2BC,eAA3B,QAAkD,mBAAlD;AAEA,OAAO,MAAMC,iBAAiB,GAAG,mBAA1B;AACP,OAAO,MAAMC,iBAAiB,GAAG,mBAA1B;AACP,OAAO,MAAMC,gBAAgB,GAAG,kBAAzB;AACP,OAAO,MAAMC,cAAc,GAAG,gBAAvB;AACP,OAAO,MAAMC,OAAO,GAAG,SAAhB;AACP,OAAO,MAAMC,KAAK,GAAG,OAAd;AACP,OAAO,SAASC,cAAT,GAA0B;AAC7B,SAAO;AACHC,IAAAA,IAAI,EAAEL;AADH,GAAP;AAGH;AACD,OAAO,SAASM,YAAT,GAAwB;AAC3B,SAAO;AACHD,IAAAA,IAAI,EAAEJ;AADH,GAAP;AAGH;AACD,OAAO,SAASM,eAAT,GAA2B;AAC9B,SAAO;AACHF,IAAAA,IAAI,EAAEP;AADH,GAAP;AAGH;AACD,OAAO,SAASU,eAAT,CAAyBC,IAAzB,EAA+B;AAClC,SAAO;AACHJ,IAAAA,IAAI,EAAEN,iBADH;AAEHU,IAAAA,IAAI,EAAEA;AAFH,GAAP;AAIH;AACD,OAAO,SAASC,MAAT,GAAkB;AACrB,SAAO;AACHL,IAAAA,IAAI,EAAEH;AADH,GAAP;AAGH;AACD,OAAO,SAASS,MAAT,CAAgBC,IAAhB,EAAsB;AACzB,SAAO,gBAAgBC,QAAhB,EAA0B;AAC7BA,IAAAA,QAAQ,CAACN,eAAe,EAAhB,CAAR;AACA,UAAMO,IAAI,GAAG,MAAMC,KAAK,CAACH,IAAD,EAAM;AAACI,MAAAA,MAAM,EAAC;AAAR,KAAN,CAAxB;AACA,UAAMC,IAAI,GAAG,MAAMH,IAAI,CAACG,IAAL,EAAnB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;;AACA,QAAGA,IAAI,CAACG,IAAL,CAAUC,YAAb,EAA0B;AACtBR,MAAAA,QAAQ,CAACP,YAAY,EAAb,CAAR;AACAO,MAAAA,QAAQ,CAACjB,gBAAgB,CAACqB,IAAI,CAACG,IAAL,CAAUC,YAAX,EAAwBJ,IAAI,CAACG,IAAL,CAAUE,aAAlC,CAAjB,CAAR;AACAT,MAAAA,QAAQ,CAAChB,eAAe,EAAhB,CAAR;AACH,KAJD,MAKK,IAAGoB,IAAI,CAACM,EAAR,EACLV,QAAQ,CAACL,eAAe,CAACS,IAAD,CAAhB,CAAR;;AACA,WAAO,MAAMA,IAAb;AACH,GAbD;AAcH;AACD,OAAO,SAASO,MAAT,CAAgBZ,IAAhB,EAAsB;AACzB,SAAO,gBAAgBC,QAAhB,EAA0B;AAC7BA,IAAAA,QAAQ,CAACN,eAAe,EAAhB,CAAR;AACA,UAAMO,IAAI,GAAG,MAAMC,KAAK,CAACH,IAAD,EAAO;AAACI,MAAAA,MAAM,EAAE;AAAT,KAAP,CAAxB;AACA,UAAMC,IAAI,GAAG,MAAMH,IAAI,CAACG,IAAL,EAAnB;;AACA,QAAGA,IAAI,CAACQ,MAAL,KAAgB,IAAnB,EAAwB;AACpBZ,MAAAA,QAAQ,CAACT,cAAc,EAAf,CAAR;AACH,KAFD,MAIAS,QAAQ,CAACL,eAAe,CAACS,IAAD,CAAhB,CAAR;;AACA,WAAO,MAAMA,IAAb;AACH,GAVD;AAWH","sourcesContent":["import { refreshingTokens, receiveUserData } from \"./tokenManagement\";\r\n\r\nexport const REQUEST_SIGN_FORM = 'REQUEST_SIGN_FORM';\r\nexport const RESEIVE_SIGN_FORM = 'RESEIVE_SIGN_FORM';\r\nexport const USER_WAS_CREATED = 'USER_WAS_CREATED';\r\nexport const USER_LOGGED_IN = 'USER_LOGGED_IN';\r\nexport const LOG_OUT = 'LOG_OUT';\r\nexport const GUEST = 'GUEST';\r\nexport function userWasCreated() {\r\n    return {\r\n        type: USER_WAS_CREATED\r\n    }\r\n}\r\nexport function userLoggedIn() {\r\n    return {\r\n        type: USER_LOGGED_IN\r\n    }\r\n}\r\nexport function requestSignForm() {\r\n    return {\r\n        type: REQUEST_SIGN_FORM\r\n    }\r\n}\r\nexport function reseiveSignForm(data) {\r\n    return {\r\n        type: RESEIVE_SIGN_FORM,\r\n        data: data\r\n    }\r\n}\r\nexport function logOut() {\r\n    return {\r\n        type: LOG_OUT\r\n    }\r\n}\r\nexport function signIn(path) {\r\n    return async function (dispatch) {\r\n        dispatch(requestSignForm());\r\n        const resp = await fetch(path,{method:'POST'});\r\n        const json = await resp.json();\r\n        console.log(json);\r\n        if(json.body.access_token){\r\n            dispatch(userLoggedIn());\r\n            dispatch(refreshingTokens(json.body.access_token,json.body.refresh_token));\r\n            dispatch(receiveUserData());\r\n        }\r\n        else if(json.st)\r\n        dispatch(reseiveSignForm(json))\r\n        return await json;\r\n    }\r\n}\r\nexport function signUp(path) {\r\n    return async function (dispatch) {\r\n        dispatch(requestSignForm());\r\n        const resp = await fetch(path, {method: 'POST'});\r\n        const json = await resp.json();\r\n        if(json.status === 'Ok'){\r\n            dispatch(userWasCreated());\r\n        }\r\n        else\r\n        dispatch(reseiveSignForm(json))\r\n        return await json;\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}