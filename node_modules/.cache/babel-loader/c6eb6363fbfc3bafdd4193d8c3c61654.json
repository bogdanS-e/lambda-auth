{"ast":null,"code":"import { refreshingTokens, receiveUserData } from \"./tokenManagement\";\nimport { type } from \"jquery\";\nexport const REQUEST_SIGN_FORM = 'REQUEST_SIGN_FORM';\nexport const RESEIVE_SIGN_FORM = 'RESEIVE_SIGN_FORM';\nexport const USER_WAS_CREATED = 'USER_WAS_CREATED';\nexport const USER_LOGGED_IN = 'USER_LOGGED_IN';\nexport const LOG_OUT = 'LOG_OUT';\nexport const GUEST = 'GUEST';\nexport const WRONG_PASSWORD = 'WRONG_PASSWORD';\nexport function wrongPassword() {\n  return {\n    type: WRONG_PASSWORD\n  };\n}\nexport function userWasCreated() {\n  return {\n    type: USER_WAS_CREATED\n  };\n}\nexport function userLoggedIn() {\n  return {\n    type: USER_LOGGED_IN\n  };\n}\nexport function requestSignForm() {\n  return {\n    type: REQUEST_SIGN_FORM\n  };\n}\nexport function reseiveSignForm(data) {\n  return {\n    type: RESEIVE_SIGN_FORM,\n    data: data\n  };\n}\nexport function logOut() {\n  return {\n    type: LOG_OUT\n  };\n}\nexport function signIn(path) {\n  return async function (dispatch) {\n    dispatch(requestSignForm());\n    const resp = await fetch(path, {\n      method: 'POST'\n    });\n    const json = await resp.json();\n\n    if (json.body && json.body.access_token) {\n      dispatch(userLoggedIn());\n      dispatch(refreshingTokens(json.body.access_token, json.body.refresh_token));\n      dispatch(receiveUserData());\n    } else if (json.status_code === 401 || json.status === 'error') {\n      dispatch(wrongPassword());\n    }\n\n    dispatch(reseiveSignForm(json));\n    return await json;\n  };\n}\nexport function signUp(path) {\n  return async function (dispatch) {\n    dispatch(requestSignForm());\n    const resp = await fetch(path, {\n      method: 'POST'\n    });\n    const json = await resp.json();\n\n    if (json.status === 'Ok') {\n      dispatch(userWasCreated());\n    } else dispatch(reseiveSignForm(json));\n\n    return await json;\n  };\n}","map":{"version":3,"sources":["C:/Users/Bogdan/Desktop/Task 3 React/my-app — копия/src/actions/signFormControllerActions.js"],"names":["refreshingTokens","receiveUserData","type","REQUEST_SIGN_FORM","RESEIVE_SIGN_FORM","USER_WAS_CREATED","USER_LOGGED_IN","LOG_OUT","GUEST","WRONG_PASSWORD","wrongPassword","userWasCreated","userLoggedIn","requestSignForm","reseiveSignForm","data","logOut","signIn","path","dispatch","resp","fetch","method","json","body","access_token","refresh_token","status_code","status","signUp"],"mappings":"AAAA,SAASA,gBAAT,EAA2BC,eAA3B,QAAkD,mBAAlD;AACA,SAASC,IAAT,QAAqB,QAArB;AAEA,OAAO,MAAMC,iBAAiB,GAAG,mBAA1B;AACP,OAAO,MAAMC,iBAAiB,GAAG,mBAA1B;AACP,OAAO,MAAMC,gBAAgB,GAAG,kBAAzB;AACP,OAAO,MAAMC,cAAc,GAAG,gBAAvB;AACP,OAAO,MAAMC,OAAO,GAAG,SAAhB;AACP,OAAO,MAAMC,KAAK,GAAG,OAAd;AACP,OAAO,MAAMC,cAAc,GAAG,gBAAvB;AACP,OAAO,SAASC,aAAT,GAAyB;AAC5B,SAAO;AACHR,IAAAA,IAAI,EAAEO;AADH,GAAP;AAGH;AACD,OAAO,SAASE,cAAT,GAA0B;AAC7B,SAAO;AACHT,IAAAA,IAAI,EAAEG;AADH,GAAP;AAGH;AACD,OAAO,SAASO,YAAT,GAAwB;AAC3B,SAAO;AACHV,IAAAA,IAAI,EAAEI;AADH,GAAP;AAGH;AACD,OAAO,SAASO,eAAT,GAA2B;AAC9B,SAAO;AACHX,IAAAA,IAAI,EAAEC;AADH,GAAP;AAGH;AACD,OAAO,SAASW,eAAT,CAAyBC,IAAzB,EAA+B;AAClC,SAAO;AACHb,IAAAA,IAAI,EAAEE,iBADH;AAEHW,IAAAA,IAAI,EAAEA;AAFH,GAAP;AAIH;AACD,OAAO,SAASC,MAAT,GAAkB;AACrB,SAAO;AACHd,IAAAA,IAAI,EAAEK;AADH,GAAP;AAGH;AACD,OAAO,SAASU,MAAT,CAAgBC,IAAhB,EAAsB;AACzB,SAAO,gBAAgBC,QAAhB,EAA0B;AAC7BA,IAAAA,QAAQ,CAACN,eAAe,EAAhB,CAAR;AACA,UAAMO,IAAI,GAAG,MAAMC,KAAK,CAACH,IAAD,EAAM;AAACI,MAAAA,MAAM,EAAC;AAAR,KAAN,CAAxB;AACA,UAAMC,IAAI,GAAG,MAAMH,IAAI,CAACG,IAAL,EAAnB;;AACA,QAAGA,IAAI,CAACC,IAAL,IAAaD,IAAI,CAACC,IAAL,CAAUC,YAA1B,EAAuC;AACnCN,MAAAA,QAAQ,CAACP,YAAY,EAAb,CAAR;AACAO,MAAAA,QAAQ,CAACnB,gBAAgB,CAACuB,IAAI,CAACC,IAAL,CAAUC,YAAX,EAAwBF,IAAI,CAACC,IAAL,CAAUE,aAAlC,CAAjB,CAAR;AACAP,MAAAA,QAAQ,CAAClB,eAAe,EAAhB,CAAR;AACH,KAJD,MAKK,IAAGsB,IAAI,CAACI,WAAL,KAAqB,GAArB,IAA4BJ,IAAI,CAACK,MAAL,KAAgB,OAA/C,EAAuD;AACxDT,MAAAA,QAAQ,CAACT,aAAa,EAAd,CAAR;AACH;;AACDS,IAAAA,QAAQ,CAACL,eAAe,CAACS,IAAD,CAAhB,CAAR;AACA,WAAO,MAAMA,IAAb;AACH,GAdD;AAeH;AACD,OAAO,SAASM,MAAT,CAAgBX,IAAhB,EAAsB;AACzB,SAAO,gBAAgBC,QAAhB,EAA0B;AAC7BA,IAAAA,QAAQ,CAACN,eAAe,EAAhB,CAAR;AACA,UAAMO,IAAI,GAAG,MAAMC,KAAK,CAACH,IAAD,EAAO;AAACI,MAAAA,MAAM,EAAE;AAAT,KAAP,CAAxB;AACA,UAAMC,IAAI,GAAG,MAAMH,IAAI,CAACG,IAAL,EAAnB;;AACA,QAAGA,IAAI,CAACK,MAAL,KAAgB,IAAnB,EAAwB;AACpBT,MAAAA,QAAQ,CAACR,cAAc,EAAf,CAAR;AACH,KAFD,MAIAQ,QAAQ,CAACL,eAAe,CAACS,IAAD,CAAhB,CAAR;;AACA,WAAO,MAAMA,IAAb;AACH,GAVD;AAWH","sourcesContent":["import { refreshingTokens, receiveUserData } from \"./tokenManagement\";\r\nimport { type } from \"jquery\";\r\n\r\nexport const REQUEST_SIGN_FORM = 'REQUEST_SIGN_FORM';\r\nexport const RESEIVE_SIGN_FORM = 'RESEIVE_SIGN_FORM';\r\nexport const USER_WAS_CREATED = 'USER_WAS_CREATED';\r\nexport const USER_LOGGED_IN = 'USER_LOGGED_IN';\r\nexport const LOG_OUT = 'LOG_OUT';\r\nexport const GUEST = 'GUEST';\r\nexport const WRONG_PASSWORD = 'WRONG_PASSWORD';\r\nexport function wrongPassword() {\r\n    return {\r\n        type: WRONG_PASSWORD\r\n    }\r\n}\r\nexport function userWasCreated() {\r\n    return {\r\n        type: USER_WAS_CREATED\r\n    }\r\n}\r\nexport function userLoggedIn() {\r\n    return {\r\n        type: USER_LOGGED_IN\r\n    }\r\n}\r\nexport function requestSignForm() {\r\n    return {\r\n        type: REQUEST_SIGN_FORM\r\n    }\r\n}\r\nexport function reseiveSignForm(data) {\r\n    return {\r\n        type: RESEIVE_SIGN_FORM,\r\n        data: data\r\n    }\r\n}\r\nexport function logOut() {\r\n    return {\r\n        type: LOG_OUT\r\n    }\r\n}\r\nexport function signIn(path) {\r\n    return async function (dispatch) {\r\n        dispatch(requestSignForm());\r\n        const resp = await fetch(path,{method:'POST'});\r\n        const json = await resp.json();\r\n        if(json.body && json.body.access_token){\r\n            dispatch(userLoggedIn());\r\n            dispatch(refreshingTokens(json.body.access_token,json.body.refresh_token));\r\n            dispatch(receiveUserData());\r\n        }\r\n        else if(json.status_code === 401 || json.status === 'error'){\r\n            dispatch(wrongPassword());\r\n        }\r\n        dispatch(reseiveSignForm(json))\r\n        return await json;\r\n    }\r\n}\r\nexport function signUp(path) {\r\n    return async function (dispatch) {\r\n        dispatch(requestSignForm());\r\n        const resp = await fetch(path, {method: 'POST'});\r\n        const json = await resp.json();\r\n        if(json.status === 'Ok'){\r\n            dispatch(userWasCreated());\r\n        }\r\n        else\r\n        dispatch(reseiveSignForm(json))\r\n        return await json;\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}